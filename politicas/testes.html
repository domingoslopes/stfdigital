<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
        <meta content="IE=edge" http-equiv="X-UA-Compatible">
        
        <title>STF Digital Developers | Testes</title>
        
        <!-- STYLESHEETS -->
        <link rel="stylesheet" href="assets/styles/fonts.css" type="text/css" >
        <link rel="stylesheet" href="assets/styles/fonts1.css" title="roboto" type="text/css">
        
        <link href="assets/styles/default.css" rel="stylesheet" type="text/css">
    </head>

    <body class="gc-documentation develop guide  dac-nav-open" itemscope="" itemtype="http://schema.org/Article">
        <header id="header-wrapper">
            <div class="dac-header" id="header">
                <div class="dac-header-inner">
                    <a class="dac-nav-toggle" data-dac-toggle-nav="" href="https://developer.android.com/guide/components/fundamentals.html" title="Open navigation"> 
                        <span class="dac-nav-hamburger"> 
                            <span class="dac-nav-hamburger-top"></span> 
                            <span class="dac-nav-hamburger-mid"></span> 
                            <span class="dac-nav-hamburger-bot"></span>
                        </span>
                    </a>
                    <a class="dac-header-logo" href="https://developer.android.com/index.html">
                        <img class="dac-header-logo-image" src="../assets/images/logo.png" srcset="../assets/images/logo.png" width="32" height="32">STF Digital
                    </a>
                    <ul class="dac-header-tabs">
                        <li><a class="dac-header-tab selected" href="#">Desenvolvimento</a></li>
                    </ul>
                    <a class="dac-header-console-btn" href="https://play.google.com/apps/publish/"> 
                        <img src="../assets/images/github-icon.png" srcset="../assets/images/github-icon.png" />
                        <span class="dac-visible-desktop-inline">Repositório</span>
                    </a>
                </div>
            <!--/.header-wrap.wrap-->
            </div>
        <!--/.header-->
        </header>
    
        <a name="navigation" tabindex="0" class="nav-start-marker">navigation</a>

        <nav class="dac-nav">
            <div class="dac-nav-dimmer" data-dac-toggle-nav=""></div>
            <div class="dac-nav-sidebar" data-swap="" data-dynamic="false" data-transition-speed="300" data-dac-nav="">
                <div data-swap-container="">
                    <a class="dac-nav-back-button dac-swap-section dac-up dac-active" tabindex="0" data-swap-button="" href="../index.html"> 
                        <i class="dac-sprite dac-nav-back"></i> 
                        <span class="dac-nav-back-title">Arquitetura</span>
                    </a>
    
                    <div class="dac-nav-sub dac-swap-section dac-right dac-active">
                        <ul id="nav">
                            <li class="nav-section expanded">
                                <div class="nav-section-header">
                                    <a href="#">Iniciando</a>
                                </div>
                                <ul style="display: block;">
                                    <li><a href="../iniciando/demonstracao.html">Demonstração</a></li>
                                    <li><a href="../iniciando/montagem.html">Monte seu Ambiente</a></li>
                                    <li><a href="../iniciando/comece-agora.html">Comece Agora</a></li>
                                </ul>
                            </li>
                            </br>
                            <li class="nav-section expanded">
                                <div class="nav-section-header">
                                    <a href="#">Arquitetura</a>
                                </div>
                                <ul style="display: block;">
                                    <li><a href="../arquitetura/visao.html">Nossa Visão</a></li>
                                    <li><a href="../arquitetura/estrategia.html">Estratégia Arquitetural</a></li>
                                    <li><a href="../arquitetura/autuacao.html">Estratégia de Implantação</a></li>
                                </ul>
                            </li>
                            </br>
                            <li class="nav-section expanded">
                                <div class="nav-section-header">
                                    <a href="#">Padrões e Políticas</a>
                                </div>
                                <ul style="display: block;">
                                    <li><a href="../politicas/testes.html">Estratégia de Testes</a></li>
                                    <li><a href="../politicas/api.html">Gestão da API</a></li>
                                    <li><a href="../politicas/codigo-limpo.html">Código Limpo</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
    
                </div>
            </div>
        </nav>

        <a name="top" tabindex="0"></a>
    
        <div class="wrap clearfix" id="body-content">
            <div class="content-header">
                <ul class="dac-header-crumbs dac-has-content">
                    <li class="dac-header-crumbs-item"><a class="dac-header-crumbs-link" href="#">Desenvolvimento</a></li>
                    <li class="dac-header-crumbs-item"><a class="dac-header-crumbs-link" href="#">Arquitetura</a></li>
                    <li class="dac-header-crumbs-item"><a class="dac-header-crumbs-link" href="#">Estratégia</a></li>
                </ul>
                <h1 itemprop="name">Estratégia de Testes</h1>
            </div>
            <div id="jd-content">
                <div class="jd-descr" itemprop="articleBody">
                    <div id="qv-wrapper">
                        <div id="qv">
                            <h2>Neste documento</h2>
                            <ol>
                                <li>
                                    <a href="#piramide">A Pirâmide de Testes</a>
                                </li>
                                <li>
                                    <a href="#unit">Testes Unitários</a>
                                </li>
                                <li>
                                    <a href="#integration">Testes de Integração</a>
                                </li>
                                <li>
                                    <a href="#end-to-end">Testes End-to-end</a>
                                </li>
                            </ol>
                        </div>
                    </div>
    
                    <p>
                        <i>Como vimos, existem vários benefícios em se utilizar uma abordagem baseada em "micro" serviços, como a possibilidade
                        de implatanção independente, a possibilidade de escalar e manter cada componente e de paralelizar o desenvolvimento usando 
                        várias equipes diferentes. Entretanto, sabendo das complexidades adicionais, notadamente aquelas relacionadas à natureza 
                        distribuída dessa abordagem, temos que reconsiderar nossa estratégia de testes, que deve ser bem diferente da utilizada 
                        em para testar sistemas monolíticos.</i>
                    </p>
                        
                    <p>
                        <i>Neste documento, apresentaremos a nossa proposta para gerenciar a complexidade adicional e se lidar com vários serviços 
                        independentes, explorando a forma como planejamos manter todos os testes e todos os componentes íntegros mesmo com 
                        várias equipes mantendo cada uma um serviço diferente.</i> 
                    </p>
                        
                    <h2 id="piramide" style="padding-bottom: 0px;">Considerações Iniciais</h2>
                    <hr>
    
                    <p>
                        Internamente, cada microservices possui sua própria estrutura lógica, geralmente dividida em camadas como na figura ao lado.
                        Qualquer estratégia de testes deveria ser capaz de cobrir os componentes de cada uma dessas camadas.
                    </p>  
    
                    <p>
                        Os microserviços se comunicam entre si por meio de mensagens. O processamento de uma requisição pode envolver
                        outros serviços, gateways ou repositórios. Os testes automáticos deveriam cobrir cada uma dessas 
                        comunicações na maior granularidade possível permitindo um ciclo de feedback muito preciso.
                    </p>  
    
                    <p>
                        Um recurso recebe uma requisição e, após validá-la, repassa ao domínio para que este inicie o processamento.
                        Se vários serviços devem ser coordenados para processar a requisição, ele orquestra
                        chamadas remotas aos demais módulos. Conexões com outros módulos merecem especial atenção porque elas
                        elas extrapolam os limites da rede. O sistema deveria ser resiliênte para suportar interrupções dos
                        serviços remotos. Adapter contém a lógica necessária para tratar essas situações. Geralmente,
                        comunicações entre serviços possuem uma granularidade menor em relação às comunicações <i>in process</i>
                        para evitar latência.
                    </p>  
    
                    <p>
                        Da mesma forma, comunicações com datastores externos merecem considerações de design diferentes. 
                        Enquanto um serviço tenha maior acoplamento com seu datastore do que com serviços externos, 
                        ele ainda está além dos limites locais e por isso ainda estão sujeitos a latência e 
                        interrupções inesperadas.
                    </p>  
    
                    <p>
                        A existência de componentes fora do domínio do serviço afeta o estilo do teste que deverá ser aplicado.
                        Testar esses componentes pode ser bem demorado e pode falhar por razões fora do controle do time.
                    </p>  
    
                    <h2 id="piramide" style="padding-bottom: 0px;">A Pirâmide de Testes</h2>
                    <hr>
    
                    <p>
                        Em geral, quanto menor a granularidade, mais frágil, mais difícil de escrever e mais demorado o teste será.
                        Isso decorre do fato de que tais testes envolvem mais partes móveis do que aqueles mais focados,
                        aqueles mais granulares. 
                    </p>  
    
                    <p>
                        O conceito da <a href="http://martinfowler.com/bliki/TestPyramid.html">pirâmide de testes</a> descreve
                        um forma simples de pensar sobre o quantos testes deveríamos escrever para cada granularidade.
                        Subindo na pirâmide o escopo dos testes cresce e o número de teste deve diminuir. 
                    </p>  
    
                    <p>
                        No topo do pirâmide estão os testes exploratórios, que devem explorar o sistemas de formas que não 
                        tenham sido consideradas como partes dos scripts de testes. Os testes exploratórios permitem 
                        que o time aprenda sobre outros comportamentos do sistema e melhore seus testes automatizados. 
                    </p>  
    
                    <p>
                        Utilizamos as orientações de pirâmide de testes para evitar que o valor dos testes seja
                        disolvido por uma cadeia de testes que seja onerosa tanto para executar quanto para manter. 
                    </p>  
    
                    <h2 id="unit" style="padding-bottom: 0px;">Testes Unitários</h2>
                    <hr>
    
                    <p class="note">
                        <strong>Definição:</strong> Um teste unitário executa a menor parte testável do software para 
                        determinar se ele se comporta como esperado.
                    </p>  
    
                    <p>
                        O tamanho da unidade em teste não pode ser definida precisamente, mas geralmente testes unitários
                        são definidos em nível de classe. Quanto menor for a unidade em teste, mais fácil será 
                        expressar o comportamento esperado, já que a complexidade tende a ser menor quanto menor for
                        a unidade que se deseja validar. 
                    </p>  
    
                    <p>
                        Geralmente, a dificuldade em escrever um teste unitário pode indicar quando um módulo deveria
                        ser quebrado em partes separadas que poderiam ser testadas mais facilmente. Assim, <strong>além
                        de ser uma das principais técnicas de qualidade, os testes unitários também são uma 
                        poderosa ferramenta de <i>design</i></strong>, especialmente quando combinada 
                        com <i>test driven development</i>. 
                    </p>  
    
                    <p>
                        Com testes unitários, você pode uma importante diferença, dependendo se a unidade em teste
                        deve ser isolada dos seus colaboradores ou não.
                    </p>

                    <ul>
                        <li>
                            Testes Unitários <strong>Sociais</strong> focam em testar o comportamento de módulos 
                            observando as mudanças de estado. Nesse caso, a unidade em teste é tratada como uma
                            caixa preta testada inteiramente por meio da sua interface. 
                        </li>
                        <li>
                            Testes Unitários <strong>Solitários</strong> focam nas interações e comunicações entre
                            um objeto e suas dependencias, que são substituidas por 
                            <a href="http://martinfowler.com/bliki/TestDouble.html">tests doubles</a>. 
                        </li>
                    </ul>

                    <p>
                        Esses dois estilos não são mutuamente exclusivos. Eles são frequentemente usados no mesmo
                        <a href="https://en.wikipedia.org/wiki/Codebase">codebase</a> para resolver diferentes 
                        tipos de problemas.
                    </p>

                    <div class="wrap feature">
                        <div class="cols dac-hero-content">
                            <div class="col-1of2 col-push-1of2 dac-hero-figure">
                                <img width="200" src="assets/images/unittesting-domain.png">
                            </div>
                            <div class="col-1of2 col-pull-1of2">
                                <p class="dac-hero-description">
                                    A lógica de <strong>domínio</strong> geralmente se manisfesta como um conjunto de processamentos 
                                    complexos e uma coleção de transições de estado. Como esse tipo de lógica é altamente 
                                    baseada nos estados, não há tanto valor em tentar isolar as unidades. Isso significa 
                                    que sempre que possível os objetos reais do domínio devem ser usados para validação
                                    da unidade em teste. 
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <h2 id="integration" style="padding-bottom: 0px;">Testes de Integração</h2>
                    <hr>
    
                    <p>
                        ...
                    </p>  
    
                    <h2 id="end-to-end" style="padding-bottom: 0px;">Testes End-to-end</h2>
                    <hr>
    
                    <p>
                        ...
                    </p>  
    
                </div>
    
            </div>
            <!-- end jd-content -->
        </div>
        <!--/#body-content-->
    </body>
</html>